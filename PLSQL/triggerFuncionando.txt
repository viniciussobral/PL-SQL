CREATE OR REPLACE TRIGGER T_ALTERCAO AFTER UPDATE ON REFERENCIA REFERENCING OLD AS O NEW AS N FOR EACH ROW
  BEGIN
    INSERT INTO MUDANCAS VALUES (:O.ID, :N.ID, :O.NOME, :N.NOME, :O.RUA, :N.RUA, USER ,TO_CHAR(SYSDATE, 'DD-MM-YYYY HH24:MI:SS'));
  END;




DROP TABLE MUDANCAS;
DROP TABLE REFERENCIA;
CREATE TABLE REFERENCIA (ID INT, NOME VARCHAR2(50), RUA VARCHAR2(50));
CREATE TABLE MUDANCAS (O_ID INT, N_ID INT, O_NOME VARCHAR2(50), N_NOME VARCHAR2(50), O_RUA VARCHAR2(50),
N_RUA VARCHAR2(50), USUARIO VARCHAR2(50), DATA_HORA VARCHAR2(50));
INSERT INTO REFERENCIA VALUES (1, 'CAIO', 'ITORORÓ');
INSERT INTO REFERENCIA VALUES (2, 'CESAR', 'SANTA');
INSERT INTO REFERENCIA VALUES (3, 'RAMOS', 'LUZIA');
UPDATE REFERENCIA SET NOME = 'JOÃO' WHERE ID = 1;
UPDATE REFERENCIA SET RUA = 'PARÁ' WHERE ID = 2;
UPDATE REFERENCIA SET ID = 4 WHERE ID = 3;
SELECT * FROM REFERENCIA;
SELECT * FROM MUDANCAS;
